{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;;;;;AAAA;AAC6G;AACjB;AAC5F,8BAA8B,mFAA2B,CAAC,4FAAqC;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,UAAU,YAAY,qBAAqB,kBAAkB;AAC7D,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM,iBAAiB,OAAO,sFAAsF,UAAU,YAAY,aAAa,WAAW,YAAY,aAAa,aAAa,WAAW,YAAY,aAAa,aAAa,MAAM,iBAAiB,oDAAoD,oBAAoB,MAAM,UAAU,UAAU,MAAM,KAAK,UAAU,UAAU,MAAM,KAAK,UAAU,YAAY,aAAa,aAAa,aAAa,OAAO,KAAK,YAAY,aAAa,aAAa,aAAa,WAAW,OAAO,eAAe,4CAA4C,oBAAoB,uBAAuB,uBAAuB,sBAAsB,wBAAwB,0BAA0B,wBAAwB,qBAAqB,2CAA2C,+CAA+C,uBAAuB,KAAK,MAAM,sBAAsB,cAAc,YAAY,qBAAqB,kBAAkB,kEAAkE,+BAA+B,eAAe,wBAAwB,mBAAmB,gBAAgB,KAAK,kBAAkB,qBAAqB,mBAAmB,KAAK,aAAa,mBAAmB,oCAAoC,2BAA2B,gCAAgC,+BAA+B,KAAK,uBAAuB,8BAA8B,qCAAqC,kCAAkC,oCAAoC,sBAAsB,KAAK,gBAAgB,aAAa,UAAU,iBAAiB,mBAAmB;AACvoD;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;ACpD1B;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,gDAAgD;AAChD;AACA;AACA,qFAAqF;AACrF;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,sFAAsF,qBAAqB;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,iDAAiD,qBAAqB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,sDAAsD,qBAAqB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACpFa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACfa;;AAEb;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACnFa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;;;;;;ACjCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oC;;;;;;;;;;;ACTa;;AAEb;AACA;AACA,cAAc,KAAwC,GAAG,sBAAiB,GAAG,CAAI;AACjF;AACA;AACA;AACA;AACA,gD;;;;;;;;;;;ACTa;;AAEb;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;;;;;AC5Da;;AAEb;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,mC;;;;;;;;;;;;;;;;;;;;ACb2B;AACD;AACF;AACxB;AAC+C;AACsB;AACrE;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,GAAG;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iEAAc;AAC9B,QAAQ;AACR,gBAAgB,iEAAc;AAC9B;AACA;AACA,MAAM,oDAAS;AACf;AACA;AACA,4BAA4B,4CAAK;AACjC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2C;;;;;;;;;;ACvGA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,KAAK,GAAG,KAAK;AAC3D;AACA;AACA;AACA;AACA,qEAAqE,KAAK;AAC1E,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU,UAAU,OAAO,YAAY,SAAS,6BAA6B,+BAA+B;AACvI;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,iD;;;;;;;;;;ACpGA;AACA;AACA,uBAAuB,aAAa;AACpC;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,gDAAgD,kCAAkC;AAClF;AACA;AACA;AACA,gCAAgC,MAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,mD;;;;;;;;;;AClCA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,+CAA+C;AAC/C;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,+CAA+C;AAC/C,4DAA4D;AAC5D;AACA;AACA,cAAc,oBAAoB,QAAQ,SAAS,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,yCAAyC,MAAM;AAC/C,4DAA4D,MAAM;AAClE;AACA;AACA;AACA;AACA,qCAAqC,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,2BAA2B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B,0BAA0B,IAAI;AAC9B;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,0DAA0D;AAC1D,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,0DAA0D;AAC1D,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA,sCAAsC,KAAK,IAAI,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qBAAqB,aAAa;AACvD;AACA,6C;;;;;;;;;;;;;;;;ACtWO;AACP;AACA;AACA;AACA;AACO;AACP;AACA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA,MAAkG;AAClG,MAAwF;AACxF,MAA+F;AAC/F,MAAkH;AAClH,MAA2G;AAC3G,MAA2G;AAC3G,MAAqG;AACrG;AACA;;AAEA;;AAEA,4BAA4B,qGAAmB;AAC/C,wBAAwB,kHAAa;AACrC,iBAAiB,uGAAa;AAC9B,iBAAiB,+FAAM;AACvB,6BAA6B,sGAAkB;;AAE/C,aAAa,0GAAG,CAAC,qFAAO;;;;AAI+C;AACvE,OAAO,iEAAe,qFAAO,IAAI,qFAAO,UAAU,qFAAO,mBAAmB,EAAC;;;;;;;;;;;;;;;;;;;;ACxBtE;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAA2D;AACxE;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,6EAA6E;AAC7E;AACA,iBAAiB,gDAAgD;AACjE;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAA2D;AACxE;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACO;AACP,sBAAsB,wBAAwB;AAC9C;AACA;AACO;AACP,sBAAsB,wBAAwB;AAC9C,C;;;;;;UC3KA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;WCNA,mC;;;;;;;;;;;;;;ACA2B","sources":["webpack://triumph/./src/styles/main.css","webpack://triumph/./node_modules/css-loader/dist/runtime/api.js","webpack://triumph/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://triumph/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://triumph/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://triumph/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://triumph/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://triumph/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://triumph/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://triumph/./src/components/app-root.js","webpack://triumph/./src/components/buffer-zone.js","webpack://triumph/./src/components/controls-bar.js","webpack://triumph/./src/components/work-zone.js","webpack://triumph/./src/store.js","webpack://triumph/./src/styles/main.css?e80a","webpack://triumph/./src/utils/polygen.js","webpack://triumph/webpack/bootstrap","webpack://triumph/webpack/runtime/compat get default export","webpack://triumph/webpack/runtime/define property getters","webpack://triumph/webpack/runtime/hasOwnProperty shorthand","webpack://triumph/webpack/runtime/make namespace object","webpack://triumph/webpack/runtime/nonce","webpack://triumph/./src/index.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root{\r\n  --bg: #0f1216;\r\n  --panel: #151a21;\r\n  --muted: #c8d1dc;\r\n  --text: #e9eef5;\r\n  --accent: #6ea8ff;\r\n  --accent-2: #8bffb0;\r\n  --border: #273142;\r\n  --radius: 14px;\r\n  --shadow: 0 8px 24px rgba(0,0,0,.35);\r\n  --shadow-soft: 0 2px 8px rgba(0,0,0,.25);\r\n  --grid-gap: 16px;\r\n}\r\n*{box-sizing:border-box}\r\nhtml,body{height:100%;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}\r\na,button,[role=\"button\"]{cursor:pointer}\r\n\r\n\r\nhtml, body {\r\n  height: 100%;\r\n  margin: 0;\r\n}\r\n\r\napp-root {\r\n  display: block;\r\n  height: 100%;\r\n}\r\n\r\nmain{\r\n  display:grid;\r\n  grid-template-rows: 240px 1fr;\r\n  gap: var(--grid-gap);\r\n  height: calc(100% - 64px);\r\n  padding: var(--grid-gap);\r\n}\r\n\r\n.buffer, .work{\r\n  background:var(--panel);\r\n  border:1px solid var(--border);\r\n  border-radius:var(--radius);\r\n  box-shadow:var(--shadow-soft);\r\n  overflow:hidden;\r\n}\r\n\r\n.buffer{height:240px}\r\n.work{min-height:320px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/styles/main.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,iBAAiB;EACjB,cAAc;EACd,oCAAoC;EACpC,wCAAwC;EACxC,gBAAgB;AAClB;AACA,EAAE,qBAAqB;AACvB,UAAU,WAAW,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,iEAAiE;AAC9H,yBAAyB,cAAc;;;AAGvC;EACE,YAAY;EACZ,SAAS;AACX;;AAEA;EACE,cAAc;EACd,YAAY;AACd;;AAEA;EACE,YAAY;EACZ,6BAA6B;EAC7B,oBAAoB;EACpB,yBAAyB;EACzB,wBAAwB;AAC1B;;AAEA;EACE,uBAAuB;EACvB,8BAA8B;EAC9B,2BAA2B;EAC3B,6BAA6B;EAC7B,eAAe;AACjB;;AAEA,QAAQ,YAAY;AACpB,MAAM,gBAAgB\",\"sourcesContent\":[\":root{\\r\\n  --bg: #0f1216;\\r\\n  --panel: #151a21;\\r\\n  --muted: #c8d1dc;\\r\\n  --text: #e9eef5;\\r\\n  --accent: #6ea8ff;\\r\\n  --accent-2: #8bffb0;\\r\\n  --border: #273142;\\r\\n  --radius: 14px;\\r\\n  --shadow: 0 8px 24px rgba(0,0,0,.35);\\r\\n  --shadow-soft: 0 2px 8px rgba(0,0,0,.25);\\r\\n  --grid-gap: 16px;\\r\\n}\\r\\n*{box-sizing:border-box}\\r\\nhtml,body{height:100%;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}\\r\\na,button,[role=\\\"button\\\"]{cursor:pointer}\\r\\n\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\napp-root {\\r\\n  display: block;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\nmain{\\r\\n  display:grid;\\r\\n  grid-template-rows: 240px 1fr;\\r\\n  gap: var(--grid-gap);\\r\\n  height: calc(100% - 64px);\\r\\n  padding: var(--grid-gap);\\r\\n}\\r\\n\\r\\n.buffer, .work{\\r\\n  background:var(--panel);\\r\\n  border:1px solid var(--border);\\r\\n  border-radius:var(--radius);\\r\\n  box-shadow:var(--shadow-soft);\\r\\n  overflow:hidden;\\r\\n}\\r\\n\\r\\n.buffer{height:240px}\\r\\n.work{min-height:320px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","import './controls-bar.js';\r\nimport './buffer-zone.js';\r\nimport './work-zone.js';\r\n\r\nimport { store, setBuffer } from '../store.js';\r\nimport { makeManySimple, makeManyConvex } from '../utils/polygen.js';\r\n\r\nclass AppRoot extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({ mode: 'open' });\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        :host { \r\n          display: grid;\r\n          grid-template-rows: auto 1fr;\r\n          height: 100vh;\r\n          min-height: 0;\r\n          --header-h: 0px;\r\n          --sep: 1px;\r\n        }\r\n\r\n        header { \r\n          padding: 12px 16px;\r\n          border-bottom: 1px solid var(--border, #2b3342);\r\n          background: linear-gradient(0deg, var(--panel, #151a21), #11161f);\r\n          color: var(--text, #e9eef5);\r\n        }\r\n       \r\n        main { \r\n          display: grid;\r\n          grid-template-rows: 220px 1fr; \r\n          height: calc(100% - var(--header-h));\r\n          border: none;\r\n          background: var(--bg, #0f1216);\r\n          position: relative;\r\n          min-height: 0;\r\n        }\r\n       \r\n        .buffer{\r\n          position: relative;\r\n          background: var(--panel, #151a21);\r\n        }\r\n\r\n        .buffer::after{\r\n          content:\"\";\r\n          position:absolute;\r\n          left:0; right:0; bottom:0;\r\n          height: var(--sep);\r\n          pointer-events:none;\r\n          background: linear-gradient(\r\n            90deg,\r\n            rgba(255,255,255,.10), \r\n            rgba(255,255,255,.06) 50%, \r\n            rgba(255,255,255,.10)\r\n          );\r\n          box-shadow: 0 0 6px rgba(110,168,255,.35);\r\n        }\r\n\r\n        .work{\r\n          position: relative;\r\n          background: var(--panel, #151a21);\r\n          min-height: 0;\r\n        }\r\n          \r\n      </style>\r\n      <header><strong>Triumph</strong> · <controls-bar></controls-bar></header>\r\n      <main>\r\n        <buffer-zone class=\"buffer\"></buffer-zone>\r\n        <work-zone class=\"work\"></work-zone>\r\n      </main>\r\n    `;\r\n\r\n    const header = this.shadowRoot.querySelector('header');\r\n    this._setHeaderHeight = () => {\r\n      // ceil, чтобы убрать дробные пиксели и возможный 1px вертикальный скролл\r\n      const hh = Math.ceil(header.getBoundingClientRect().height);\r\n      this.style.setProperty('--header-h', `${hh}px`);\r\n    };\r\n    this._setHeaderHeight();\r\n\r\n    this._headerRO = new ResizeObserver(this._setHeaderHeight);\r\n    this._headerRO.observe(header);\r\n    window.addEventListener('resize', this._setHeaderHeight);\r\n\r\n    this.addEventListener('polys:create', (e)=> {\r\n      let polys;\r\n      if (e.detail.type === 'convex') {\r\n        polys = makeManyConvex();\r\n      } else {\r\n        polys = makeManySimple();\r\n      }\r\n\r\n      setBuffer(polys);\r\n\r\n      const bufferZone = this.shadowRoot.querySelector('buffer-zone');\r\n      bufferZone.polygons = store.buffer;\r\n    });\r\n\r\n\r\n    this.addEventListener('polys:save', ()=>console.log('save'));\r\n    this.addEventListener('polys:reset', ()=>console.log('reset'));\r\n  }\r\n}\r\ncustomElements.define('app-root', AppRoot);","class BufferZone extends HTMLElement {\r\n  connectedCallback() { \r\n    this.attachShadow({mode:'open'}); \r\n    this._polys = [];\r\n    this._selectedId = null;\r\n    this.render();\r\n  }\r\n\r\n  set polygons(v) {\r\n   this._polys= v || [];\r\n   this.render();\r\n  }\r\n\r\n  render() {\r\n    const svgItems = this._polys.map(p => {\r\n      const pointsStr = p.points.map(pt => `${pt.x},${pt.y}`).join(\" \");\r\n      \r\n      const isSelected = this._selectedId === p.id;\r\n      \r\n      return `\r\n        <svg width=\"120\" height=\"90\" viewBox=\"0 0 120 90\" data-id=\"${p.id}\">\r\n          ${isSelected ? `\r\n            <defs>\r\n              <filter id=\"glow\" height=\"150%\" width=\"150%\">\r\n                <feDropShadow dx=\"0\" dy=\"0\" stdDeviation=\"6.5\" flood-color=\"orange\" flood-opacity=\"0.9\"/>\r\n              </filter>\r\n            </defs>` : ''} \r\n        <polygon points=\"${pointsStr}\" fill=\"${p.fill}\" stroke=\"${p.stroke}\" stroke-width=\"1\" filter=\"${isSelected ? 'url(#glow)' : ''}\"/>\r\n        </svg>\r\n      `;\r\n    }).join(\" \");\r\n\r\n    this.shadowRoot.innerHTML = `\r\n    <style>\r\n      :host { \r\n        display: block; \r\n        padding: 8px; \r\n        overflow: auto; \r\n      }\r\n\r\n      div[part=\"wrap\"] { \r\n        position: relative; \r\n        display: flex; \r\n        flex-wrap: wrap;\r\n      }\r\n\r\n      svg { \r\n        pointer-events: auto;\r\n        cursor: pointer;\r\n        margin-right: 2px;\r\n        margin-bottom: 3px; \r\n      }\r\n\r\n    </style>\r\n    <div part=\"wrap\">\r\n      ${svgItems || '<em>Нажмите «Создать»</em>'}\r\n    </div>\r\n    `;\r\n\r\n    this.shadowRoot.querySelectorAll('svg').forEach(svg => {\r\n      svg.addEventListener('click', () => {\r\n        this._selectedId = svg.dataset.id;\r\n        this.render();\r\n      });\r\n\r\n      svg.addEventListener('mousedown', e => {\r\n        const polygon = this._polys.find(p => p.id === svg.dataset.id);\r\n        const appRoot = this.getRootNode().host;\r\n        const workZone = appRoot.shadowRoot.querySelector('work-zone'); \r\n\r\n        if(!workZone) return;\r\n\r\n        const startX = e.clientX;\r\n        const startY = e.clientY;\r\n        let dragging = false;\r\n\r\n        const onMouseMove = ev => {\r\n          const dx = Math.abs(ev.clientX - startX);\r\n          const dy = Math.abs(ev.clientY - startY);\r\n\r\n          if(!dragging && (dx > 3 || dy > 3)) {\r\n            dragging = true;\r\n            workZone.startDragFromBuffer(ev, polygon);\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n          }\r\n        };\r\n\r\n        const onMouseUp = ev => {\r\n          document.removeEventListener('mousemove', onMouseMove);\r\n          document.removeEventListener('mouseup', onMouseUp);\r\n        };\r\n\r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\ncustomElements.define('buffer-zone', BufferZone);","class ControlsBar extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({mode: 'open'});\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        button { margin-right: 8px; }\r\n        select { margin-left: 12px; }\r\n      </style>\r\n\r\n      <button id=\"create\">Создать</button>\r\n      <button id=\"save\">Сохранить</button>\r\n      <button id=\"reset\">Сбросить</button>\r\n    \r\n      <label>\r\n        Тип:\r\n        <select id=\"polyType\">\r\n          <option value=\"simple\" selected>Обычные</option>\r\n          <option value=\"convex\">Выпуклые</option>\r\n        </select>\r\n      </label>\r\n      `;\r\n\r\n    const send = (type, detail={}) =>\r\n      this.dispatchEvent( new CustomEvent(type,{detail,bubbles:true,composed:true}));\r\n\r\n      this.shadowRoot.getElementById('create').onclick = () => {\r\n        const type = this.shadowRoot.getElementById('polyType').value;\r\n        send ('polys:create', { type });\r\n      };\r\n\r\n      this.shadowRoot.getElementById('save').onclick = () => send('polys:save');\r\n      this.shadowRoot.getElementById('reset').onclick = () => send('polys:reset');\r\n  }\r\n}\r\ncustomElements.define('controls-bar', ControlsBar);","class WorkZone extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        :host { \r\n          display: block; \r\n          border: none; \r\n          height: 100%; \r\n          min-height: 300px;\r\n          background:#f0f0f0; \r\n          position: relative;\r\n          --ruler: 26px;\r\n          --cell-px: 40;\r\n          --units-per-cell: 10;\r\n        }\r\n\r\n        canvas {\r\n          position: absolute;\r\n          display: block;\r\n          pointer-events: none;\r\n        }\r\n\r\n        #grid {\r\n          position:absolute;\r\n          left:  var(--ruler);\r\n          top:   0;\r\n          width:  calc(100% - var(--ruler));   /* ← явная ширина */\r\n          height: calc(100% - var(--ruler));   /* ← явная высота */\r\n          z-index: 0;\r\n          background:#2b2f36;\r\n        }\r\n\r\n        .ruler-x {\r\n          position:absolute;\r\n          left:  var(--ruler);\r\n          bottom:0;\r\n          width: calc(100% - var(--ruler));    /* ← явная ширина */\r\n          height: var(--ruler);\r\n          z-index: 1;\r\n          background:#4b4f56;\r\n        }\r\n\r\n        .ruler-y {\r\n          position:absolute;\r\n          left:0; top:0;\r\n          width: var(--ruler);\r\n          height: calc(100% - var(--ruler));   /* ← явная высота */\r\n          z-index:1;\r\n          background:#4b4f56;\r\n        }\r\n\r\n        .corner{\r\n          position: absolute; \r\n          left: 0; \r\n          bottom: 0; \r\n          width: var(--ruler);\r\n          height: var(--ruler);\r\n          background: #4b4f56; \r\n          z-index: 1;\r\n          pointer-events:none;\r\n        }\r\n\r\n        .divider{\r\n          position:absolute;\r\n          left:0; top:0;\r\n          width:100%;;\r\n          height:0;                            /* задаём из JS */\r\n          pointer-events:none;\r\n          z-index:2;                           /* выше сетки */\r\n          background:\r\n            linear-gradient(to bottom,\r\n              rgba(255,255,255,.10),\r\n              rgba(255,255,255,0));            /* очень деликатно */\r\n          box-shadow: inset 0 -1px 0 rgba(255,255,255,.08); /* тонкая линия внизу */\r\n        }\r\n        \r\n        svg { position: absolute; top: 0; left: 0; cursor: grab; z-index: 3; }\r\n      </style>\r\n\r\n      <div class=\"divider\" id=\"divider\" aria-hidden=\"true\"></div>\r\n      <canvas id=\"grid\"></canvas>\r\n      <canvas class=\"ruler-x\"></canvas>\r\n      <canvas class=\"ruler-y\"></canvas>\r\n      <canvas class=\"corner\" id=\"corner\"></canvas>\r\n    `;\r\n\r\n    this.$grid = this.shadowRoot.getElementById('grid');\r\n    this.$rx = this.shadowRoot.querySelector('.ruler-x');\r\n    this.$ry = this.shadowRoot.querySelector('.ruler-y');\r\n    this.$corner = this.shadowRoot.getElementById('corner');\r\n    this.$divider = this.shadowRoot.getElementById('divider');\r\n\r\n    const ro = new ResizeObserver(() => this.layoutAndDraw());\r\n    ro.observe(this);\r\n    this._ro = ro;\r\n    requestAnimationFrame(() => this.layoutAndDraw());\r\n  }\r\n\r\n  disconnectedCallback(){ this._ro?.disconnect(); }\r\n\r\n  /* ===== раскладка и отрисовка ===== */\r\n  layoutAndDraw(){\r\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\r\n\r\n    const cs = getComputedStyle(this);\r\n    const cell  = parseFloat(cs.getPropertyValue('--cell-px')) || 40;\r\n    const ruler = parseFloat(cs.getPropertyValue('--ruler'))   || 26;\r\n\r\n    const hostRect = this.getBoundingClientRect();\r\n    const availW = hostRect.width  - ruler;        \r\n    const availH = hostRect.height - ruler;\r\n\r\n    const snapY = availH % cell;                   // сколько «лишнего» внизу\r\n    const snapX = 0;  \r\n\r\n    this.$grid.style.top    = snapY ? `${snapY}px` : '0px';\r\n    this.$grid.style.height = `calc(100% - var(--ruler) - ${snapY}px)`;\r\n\r\n    this.$ry.style.top      = this.$grid.style.top;\r\n    this.$ry.style.height   = this.$grid.style.height;\r\n\r\n    this.$divider.style.height  = `${snapY}px`;\r\n    this.$divider.style.display = snapY ? 'block' : 'none';\r\n\r\n    const fit = (el) => {\r\n      const r = el.getBoundingClientRect();\r\n      el.width  = Math.max(1, Math.floor(r.width  * dpr));\r\n      el.height = Math.max(1, Math.floor(r.height * dpr));\r\n      const ctx = el.getContext('2d');\r\n      ctx.setTransform(dpr,0,0,dpr,0,0); // рисуем в CSS-px\r\n      return ctx;\r\n    };\r\n\r\n    this._ctxGrid = fit(this.$grid);\r\n    this._ctxX = fit(this.$rx);\r\n    this._ctxY = fit(this.$ry);\r\n    this._ctxCorner = fit(this.$corner);\r\n\r\n    this.drawGrid();\r\n    this.drawRulerX();\r\n    this.drawRulerY();\r\n    this.drawCorner();\r\n  }\r\n\r\n  drawCorner() {\r\n    const ctx = this._ctxCorner;\r\n    const r = this.$corner.getBoundingClientRect();\r\n    const w = r.width, h = r.height;\r\n\r\n    ctx.fillStyle = '#e1e3e6';\r\n    ctx.font = '12px system-ui,-apple-system, Segoe UI, Roboto, Inter, Arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n\r\n    ctx.fillText('0', w / 2, h / 2);\r\n  }\r\n\r\n  drawGrid(){\r\n    const ctx = this._ctxGrid;\r\n    const r = this.$grid.getBoundingClientRect();\r\n    const w = r.width, h = r.height;\r\n    const cell = parseFloat(getComputedStyle(this).getPropertyValue('--cell-px')) || 40;\r\n\r\n    // фон\r\n    ctx.fillStyle = '#2b2f36';\r\n    ctx.fillRect(0,0,w,h);\r\n\r\n    // линии\r\n    const majorEach = 5; // каждая 5-я толще\r\n    for (let x = 0, i=0; x <= w+0.5; x += cell, i++){\r\n      ctx.beginPath();\r\n      ctx.lineWidth = (i % majorEach === 0) ? 1.2 : 1;\r\n      ctx.strokeStyle = (i % majorEach === 0) ? 'rgba(255,255,255,.18)' : 'rgba(255,255,255,.10)';\r\n      ctx.moveTo(Math.floor(x)+0.5, 0);\r\n      ctx.lineTo(Math.floor(x)+0.5, h);\r\n      ctx.stroke();\r\n    }\r\n    for (let y = 0, j=0; y <= h+0.5; y += cell, j++){\r\n      ctx.beginPath();\r\n      ctx.lineWidth = (j % majorEach === 0) ? 1.2 : 1;\r\n      ctx.strokeStyle = (j % majorEach === 0) ? 'rgba(255,255,255,.18)' : 'rgba(255,255,255,.10)';\r\n      ctx.moveTo(0, Math.floor(y)+0.5);\r\n      ctx.lineTo(w, Math.floor(y)+0.5);\r\n      ctx.stroke();\r\n    }\r\n  }\r\n\r\n  drawRulerX(){\r\n    const ctx = this._ctxX;\r\n    const w = this.$rx.getBoundingClientRect().width;\r\n    const h = this.$rx.getBoundingClientRect().height;\r\n    const cell  = parseFloat(getComputedStyle(this).getPropertyValue('--cell-px')) || 40;\r\n    const units = parseFloat(getComputedStyle(this).getPropertyValue('--units-per-cell')) || 10;\r\n\r\n    // фон\r\n    ctx.clearRect(0,0,w,h);\r\n    ctx.fillStyle = '#4b4f56';\r\n    ctx.fillRect(0,0,w,h);\r\n\r\n    // подписи без рисок\r\n    ctx.fillStyle = '#e1e3e6';\r\n    ctx.font = '12px system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n\r\n    for (let x = cell, i = 1; x <= w + 0.5; x += cell, i++){\r\n      const X = Math.floor(x) + 0.5;      // пиксель-перфект кратоклеточное выравнивание\r\n      ctx.fillText(String(i * units), X, h / 2);\r\n    }\r\n  }\r\n\r\n  drawRulerY(){\r\n    const ctx = this._ctxY;\r\n    const w = this.$ry.getBoundingClientRect().width;\r\n    const h = this.$ry.getBoundingClientRect().height;\r\n    const cell  = parseFloat(getComputedStyle(this).getPropertyValue('--cell-px')) || 40;\r\n    const units = parseFloat(getComputedStyle(this).getPropertyValue('--units-per-cell')) || 10;\r\n\r\n    // фон\r\n    ctx.clearRect(0,0,w,h);\r\n    ctx.fillStyle = '#4b4f56';\r\n    ctx.fillRect(0,0,w,h);\r\n\r\n    // подписи без рисок (0 — внизу)\r\n    ctx.fillStyle = '#e1e3e6';\r\n    ctx.font = '12px system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial';\r\n    ctx.textAlign = 'left';\r\n    ctx.textBaseline = 'middle';\r\n\r\n    const steps = Math.round(h / cell);\r\n\r\n    for (let i = 1; i < steps; i++){\r\n      // y на центр риски: одна клетка выше низа, две клетки выше и т.д.\r\n      const y = Math.floor(h - i * cell) + 0.5;\r\n      const label = i * units;\r\n      ctx.fillText(String(label), 4, y);\r\n    }\r\n  }\r\n\r\n  _gridBounds(svgWidth = 0, svgHeight = 0) {\r\n    const host = this.getBoundingClientRect();\r\n    const grid = this.$grid.getBoundingClientRect();\r\n    const minLeft = grid.left - host.left;\r\n    const minTop  = grid.top  - host.top;\r\n    const maxLeft = minLeft + grid.width  - svgWidth;\r\n    const maxTop  = minTop  + grid.height - svgHeight;\r\n    return { minLeft, minTop, maxLeft, maxTop };\r\n  }\r\n\r\n  startDragFromBuffer(e, polygonData) {\r\n    e.preventDefault();\r\n    const rect = this.shadowRoot.host.getBoundingClientRect();\r\n    const svg = this.addPolygon(polygonData, e.clientX - rect.left, e.clientY - rect.top);\r\n\r\n    const offsetX = e.clientX - svg.getBoundingClientRect().left;\r\n    const offsetY = e.clientY - svg.getBoundingClientRect().top;\r\n\r\n    const onMouseMove = ev => {\r\n      const svgRect = svg.getBoundingClientRect();\r\n      const { minLeft, maxLeft, maxTop } =\r\n        this._gridBounds(svgRect.width, svgRect.height);\r\n\r\n      let left = ev.clientX - rect.left - offsetX;\r\n      let top  = ev.clientY - rect.top  - offsetY;\r\n\r\n      left = Math.max(minLeft, Math.min(left, maxLeft));\r\n      top  = Math.min(top, maxTop); \r\n\r\n      svg.style.left = `${left}px`;\r\n      svg.style.top  = `${top}px`;\r\n    };\r\n    \r\n    const onMouseUp = eve => {\r\n      const workRect = this.getBoundingClientRect();\r\n      const svgRect  = svg.getBoundingClientRect();\r\n      const poly     = svg.querySelector('polygon');      // сам полигон\r\n      const polyRect = poly.getBoundingClientRect();\r\n\r\n      const gridTopLocal = this.$grid.offsetTop;          // низ divider'а в лок.коорд. host\r\n      const polyTopLocal = polyRect.top - workRect.top;   // верх полигона относительно host\r\n\r\n      // 1) Любая часть полигона ушла в буфер → убрать\r\n      if (polyTopLocal < 0) {\r\n        svg.remove();\r\n      }\r\n      // 2) Полигон в зоне divider (но не в буфере) → щёлкнуть к сетке\r\n      else if (polyTopLocal < gridTopLocal) {\r\n        const offsetInSvg = polyRect.top - svgRect.top;   // смещение верха полигона внутри svg\r\n        const targetTop   = gridTopLocal - offsetInSvg;   // делаем так, чтобы верх полигона = gridTop\r\n        svg.style.top = `${Math.round(targetTop)}px`;\r\n      }\r\n      \r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n    };\r\n\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n  }\r\n\r\n  addPolygon(polygonData, x, y) {\r\n    const svgNS = \"http://www.w3.org/2000/svg\";\r\n    const svg = document.createElementNS(svgNS, \"svg\");\r\n    svg.setAttribute(\"width\", 120);\r\n    svg.setAttribute(\"height\", 90);\r\n    svg.style.position = \"absolute\";\r\n    svg.style.left = `${x - 60}px`;\r\n    svg.style.top = `${y - 45}px`;\r\n\r\n    const polygon = document.createElementNS(svgNS, \"polygon\");\r\n    polygon.setAttribute(\r\n      \"points\", \r\n      polygonData.points.map(pt => `${pt.x}, ${pt.y}`).join(\" \"));\r\n    polygon.setAttribute(\"fill\", polygonData.fill);\r\n    polygon.setAttribute(\"stroke\", polygonData.stroke);\r\n    polygon.setAttribute(\"stroke-width\", 1);\r\n\r\n    svg.appendChild(polygon);\r\n    this.shadowRoot.appendChild(svg);\r\n\r\n    svg.addEventListener('mousedown', e => {\r\n      this.startDrag(e, svg);\r\n    });\r\n    return svg;\r\n  }\r\n\r\n  startDrag(e, svg) {\r\n    e.preventDefault();\r\n    const rect = this.shadowRoot.host.getBoundingClientRect();\r\n    const offsetX = e.clientX - svg.getBoundingClientRect().left;\r\n    const offsetY = e.clientY - svg.getBoundingClientRect().top;\r\n\r\n    const onMouseMove = (ev) => {\r\n    let newLeft = ev.clientX - rect.left - offsetX;\r\n    let newTop = ev.clientY - rect.top - offsetY;\r\n\r\n    if (newLeft < 0) newLeft = 0;\r\n    if (newLeft + svg.offsetWidth > rect.width) newLeft = rect.width - svg.offsetWidth;\r\n\r\n    if (newTop < 0) newTop = 0;\r\n    if (newTop + svg.offsetHeight > rect.height) newTop = rect.height - svg.offsetHeight;\r\n\r\n    svg.style.left = `${newLeft}px`;\r\n    svg.style.top = `${newTop}px`;\r\n    };\r\n    \r\n    const onMouseUp = () => {\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n    };\r\n\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n  }\r\n\r\n  //set polygons(v){ this._ploys=v||[]; } set view(v){ this._view=v; }\r\n}\r\ncustomElements.define('work-zone', WorkZone);","export const store = {\r\n  buffer: [],\r\n  work: [],\r\n};\r\n\r\nexport const setBuffer = (list) => {\r\n  store.buffer = list;\r\n};","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./main.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./main.css\";\n       export default content && content.locals ? content.locals : undefined;\n","export const randInt = (a, b) => a + Math.floor(Math.random() * (b - a +1));\r\n\r\nfunction normalizePolygon(pts, svgWidth = 120, svgHeight = 90, padding = 4) {\r\n  const xs = pts.map(p => p.x);\r\n  const ys = pts.map(p => p.y);\r\n\r\n  const minX = Math.min(...xs);\r\n  const maxX = Math.max(...xs);\r\n  const minY = Math.min(...ys);\r\n  const maxY = Math.max(...ys);\r\n\r\n  const polyWidth = maxX - minX;\r\n  const polyHeight = maxY - minY;\r\n\r\n  const scaleX = (svgWidth - 2*padding) / (polyWidth || 1);\r\n  const scaleY = (svgHeight - 2*padding) / (polyHeight || 1);\r\n  const scale = Math.min(scaleX, scaleY);\r\n\r\n  const offsetX = padding - minX*scale;\r\n  const offsetY = padding - minY*scale;\r\n\r\n  return pts.map(p => ({\r\n    x: p.x*scale + offsetX,\r\n    y: p.y*scale + offsetY\r\n  }));\r\n}\r\n\r\nfunction segmentsIntersect(a, b, c, d) {\r\n  const cross = (p1, p2, p3) =>\r\n    (p2.x - p1.x) * (p3.y - p1.y) - (p2.y - p1.y) * (p3.x - p1.x);\r\n\r\n  const d1 = cross(a, b, c);\r\n  const d2 = cross(a, b, d);\r\n  const d3 = cross(c, d, a);\r\n  const d4 = cross(c ,d, b);\r\n\r\n  return (d1 * d2 < 0) && (d3 * d4 < 0);\r\n}\r\n\r\nfunction isSimplePolygon(pts) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a1 = pts[i];\r\n    const b1 = pts[(i+1)%n];\r\n    for (let j = i+1; j < n; j++) {\r\n      if (Math.abs(i-j) <= 1 || (i===0 && j===n-1) || (i===n-1 && j===0)) continue;\r\n      const a2 = pts[j];\r\n      const b2 = pts[(j+1)%n];\r\n      if (segmentsIntersect(a1, b1, a2, b2)) return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isConvexPolygon(pts) {\r\n  const n = pts.length;\r\n  if (n < 3) return false;\r\n  let sign = 0;\r\n\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const c = pts[(i + 2) % n];\r\n\r\n    const cross = (b.x - a.x)*(c.y - b.y) - (b.y - a.y)*(c.x - b.x);\r\n\r\n    if (Math.abs(cross) > 1e-8) {\r\n      const s = Math.sign(cross);\r\n      if (sign === 0) sign = s;\r\n      else if (s !== sign) return false;\r\n    }\r\n  }\r\n\r\n  console.log('gh');\r\n  return true;\r\n}\r\n\r\nfunction isAngleEnough(pts, minAngleDeg = 15) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const c = pts[(i + 2) % n];\r\n\r\n    const v1 = { x: b.x - a.x, y: b.y - a.y };\r\n    const v2 = { x: c.x - b.x, y: c.y - b.y };\r\n\r\n    const cosAngle = (v1.x * v2.x + v1.y * v2.y) / (Math.hypot(v1.x, v1.y) * Math.hypot(v2.x, v2.y));\r\n    const angleDeg = Math.acos(Math.min(Math.max(cosAngle, -1), 1)) * 180 / Math.PI;\r\n\r\n    if (angleDeg < minAngleDeg) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isDistanceEnough(pts, dMin = 25) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const dist = Math.hypot(b.x - a.x, b.y - a.y);\r\n    if (dist < dMin) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function makePolySimple() {\r\n  const n = randInt(3, 8);\r\n  const rMin = 25, rMax = 50;\r\n  let pts;\r\n\r\n  do {\r\n    const angles = Array.from({length:n}, () => Math.random() * 2*Math.PI).sort((a,b)=>a-b);\r\n    pts = angles.map(t => {\r\n      const r = rMin + Math.random()*(rMax - rMin);\r\n      return {\r\n        x: r * Math.cos(t),\r\n        y: r * Math.sin(t)\r\n      };\r\n    });\r\n  } while (\r\n    !isSimplePolygon(pts) ||\r\n    !isAngleEnough(pts) ||\r\n    !isDistanceEnough(pts)\r\n  );\r\n\r\n  pts = normalizePolygon(pts, 120, 90, 8);\r\n\r\n  const h = randInt(0,360);\r\n  return {\r\n    id: `p_${crypto.randomUUID ?.() || Date.now() + ' ' + Math.random()}`,\r\n    points: pts,\r\n    fill: `hsl(${h} 70% 55%)`,\r\n    stroke: 'rgba(0,0,0.25)'\r\n  };\r\n} \r\n\r\nexport function makePolyConvex() {\r\n  let pts;\r\n  const n = randInt(3, 8);\r\n  const rMin = 25, rMax = 45;\r\n  const r = (rMin + rMax)/2;\r\n\r\n  do {\r\n    pts = [];\r\n    let angleStep = (2 * Math.PI) / n;\r\n    for (let i = 0; i < n; i++) {\r\n      const angle = i * angleStep + (Math.random() - 0.5) * angleStep * 0.5; // разброс ±25%\r\n      const r = rMin + Math.random() * (rMax - rMin) * 0.25;\r\n      pts.push({ x: r * Math.cos(angle), y: r * Math.sin(angle) });\r\n    }\r\n  } while (!isConvexPolygon(pts) || !isSimplePolygon(pts));\r\n\r\n  pts = normalizePolygon(pts, 120, 90, 8);\r\n\r\n  const h = randInt(0, 360);\r\n\r\n  return {\r\n    id: `p_${crypto.randomUUID ?.() || Date.now() + ' ' + Math.random()}`,\r\n    points: pts,\r\n    fill: `hsl(${h} 70% 55%)`,\r\n    stroke: 'rgba(0,0,0.25)'\r\n  };\r\n} \r\n\r\nexport function makeManySimple() {\r\n  return Array.from({ length: randInt(5, 20) }, makePolySimple);\r\n}\r\n\r\nexport function makeManyConvex() {\r\n  return Array.from({ length: randInt(5, 20) }, makePolyConvex);\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","import './styles/main.css';\r\nimport './components/app-root.js'"],"names":[],"sourceRoot":""}