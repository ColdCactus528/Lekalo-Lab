{"version":3,"file":"assets/js/main.6153248b.js","mappings":"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","sources":["webpack://triumph/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://triumph/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://triumph/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://triumph/./src/components/buffer-divider.js","webpack://triumph/./src/styles/main.css","webpack://triumph/./node_modules/css-loader/dist/runtime/api.js","webpack://triumph/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://triumph/./src/components/buffer-zone.js","webpack://triumph/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://triumph/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://triumph/./src/components/controls-bar.js","webpack://triumph/./src/components/work-zone.js","webpack://triumph/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://triumph/webpack/bootstrap","webpack://triumph/webpack/runtime/compat get default export","webpack://triumph/webpack/runtime/define property getters","webpack://triumph/webpack/runtime/hasOwnProperty shorthand","webpack://triumph/webpack/runtime/nonce","webpack://triumph/./src/styles/main.css?e80a","webpack://triumph/./src/store.js","webpack://triumph/./src/utils/polygen.js","webpack://triumph/./src/components/app-root.js"],"sourcesContent":["\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","class BufferDivider extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({ mode: 'open' });\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        :host{\r\n          display:block;\r\n          height: var(--divider-h, 12px);\r\n          pointer-events: none;\r\n          background:\r\n            linear-gradient(to bottom,\r\n              rgba(255,255,255,.10),\r\n              rgba(255,255,255,0));\r\n          box-shadow: inset 0 -1px 0 rgba(255,255,255,.08);\r\n        }\r\n      </style>\r\n      <div aria-hidden=\"true\"></div>\r\n    `;\r\n  }\r\n}\r\ncustomElements.define('buffer-divider', BufferDivider);\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root{\r\n  --bg: #0f1216;\r\n  --panel: #151a21;\r\n  --muted: #c8d1dc;\r\n  --text: #e9eef5;\r\n  --accent: #6ea8ff;\r\n  --accent-2: #8bffb0;\r\n  --border: #273142;\r\n  --radius: 14px;\r\n  --shadow: 0 8px 24px rgba(0,0,0,.35);\r\n  --shadow-soft: 0 2px 8px rgba(0,0,0,.25);\r\n  --grid-gap: 16px;\r\n}\r\n*{box-sizing:border-box}\r\nhtml,body{height:100%;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}\r\na,button,[role=\"button\"]{cursor:pointer}\r\n\r\n\r\nhtml, body {\r\n  height: 100%;\r\n  margin: 0;\r\n}\r\n\r\napp-root {\r\n  display: block;\r\n  height: 100%;\r\n}\r\n\r\nmain{\r\n  display:grid;\r\n  grid-template-rows: 240px 1fr;\r\n  gap: var(--grid-gap);\r\n  height: calc(100% - 64px);\r\n  padding: var(--grid-gap);\r\n}\r\n\r\n.buffer, .work{\r\n  background:var(--panel);\r\n  border:1px solid var(--border);\r\n  border-radius:var(--radius);\r\n  box-shadow:var(--shadow-soft);\r\n  overflow:hidden;\r\n}\r\n\r\n.buffer{height:240px}\r\n.work{min-height:320px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/styles/main.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,iBAAiB;EACjB,cAAc;EACd,oCAAoC;EACpC,wCAAwC;EACxC,gBAAgB;AAClB;AACA,EAAE,qBAAqB;AACvB,UAAU,WAAW,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,iEAAiE;AAC9H,yBAAyB,cAAc;;;AAGvC;EACE,YAAY;EACZ,SAAS;AACX;;AAEA;EACE,cAAc;EACd,YAAY;AACd;;AAEA;EACE,YAAY;EACZ,6BAA6B;EAC7B,oBAAoB;EACpB,yBAAyB;EACzB,wBAAwB;AAC1B;;AAEA;EACE,uBAAuB;EACvB,8BAA8B;EAC9B,2BAA2B;EAC3B,6BAA6B;EAC7B,eAAe;AACjB;;AAEA,QAAQ,YAAY;AACpB,MAAM,gBAAgB\",\"sourcesContent\":[\":root{\\r\\n  --bg: #0f1216;\\r\\n  --panel: #151a21;\\r\\n  --muted: #c8d1dc;\\r\\n  --text: #e9eef5;\\r\\n  --accent: #6ea8ff;\\r\\n  --accent-2: #8bffb0;\\r\\n  --border: #273142;\\r\\n  --radius: 14px;\\r\\n  --shadow: 0 8px 24px rgba(0,0,0,.35);\\r\\n  --shadow-soft: 0 2px 8px rgba(0,0,0,.25);\\r\\n  --grid-gap: 16px;\\r\\n}\\r\\n*{box-sizing:border-box}\\r\\nhtml,body{height:100%;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}\\r\\na,button,[role=\\\"button\\\"]{cursor:pointer}\\r\\n\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\napp-root {\\r\\n  display: block;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\nmain{\\r\\n  display:grid;\\r\\n  grid-template-rows: 240px 1fr;\\r\\n  gap: var(--grid-gap);\\r\\n  height: calc(100% - 64px);\\r\\n  padding: var(--grid-gap);\\r\\n}\\r\\n\\r\\n.buffer, .work{\\r\\n  background:var(--panel);\\r\\n  border:1px solid var(--border);\\r\\n  border-radius:var(--radius);\\r\\n  box-shadow:var(--shadow-soft);\\r\\n  overflow:hidden;\\r\\n}\\r\\n\\r\\n.buffer{height:240px}\\r\\n.work{min-height:320px}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","class BufferZone extends HTMLElement {\r\n  connectedCallback() { \r\n    this.attachShadow({mode:'open'}); \r\n    this._polys = [];\r\n    this._selectedId = null;\r\n    this.render();\r\n  }\r\n\r\n  set polygons(v) {\r\n   this._polys= v || [];\r\n   this.render();\r\n  }\r\n\r\n  render() {\r\n    const svgItems = this._polys.map(p => {\r\n      const pointsStr = p.points.map(pt => `${pt.x},${pt.y}`).join(\" \");\r\n      \r\n      const isSelected = this._selectedId === String(p.id);\r\n      \r\n      return `\r\n        <svg width=\"120\" height=\"90\" viewBox=\"0 0 120 90\" data-id=\"${p.id}\">\r\n          ${isSelected ? `\r\n            <defs>\r\n              <filter id=\"glow\" height=\"150%\" width=\"150%\">\r\n                <feDropShadow dx=\"0\" dy=\"0\" stdDeviation=\"6.5\" flood-color=\"orange\" flood-opacity=\"0.9\"/>\r\n              </filter>\r\n            </defs>` : ''} \r\n        <polygon points=\"${pointsStr}\" fill=\"${p.fill}\" stroke=\"${p.stroke}\" stroke-width=\"1\" filter=\"${isSelected ? 'url(#glow)' : ''}\"/>\r\n        </svg>\r\n      `;\r\n    }).join(\" \");\r\n\r\n    this.shadowRoot.innerHTML = `\r\n    <style>\r\n      :host { \r\n        display: block; \r\n        padding: 8px; \r\n        overflow: auto; \r\n      }\r\n\r\n      div[part=\"wrap\"] { \r\n        position: relative; \r\n        display: flex; \r\n        flex-wrap: wrap;\r\n      }\r\n\r\n      svg { \r\n        pointer-events: auto;\r\n        cursor: pointer;\r\n        margin-right: 2px;\r\n        margin-bottom: 3px; \r\n      }\r\n\r\n    </style>\r\n    <div part=\"wrap\">\r\n      ${svgItems || '<em>Нажмите «Создать»</em>'}\r\n    </div>\r\n    `;\r\n\r\n    this.shadowRoot.querySelectorAll('svg').forEach(svg => {\r\n      svg.addEventListener('click', () => {\r\n        this._selectedId = String(svg.dataset.id);\r\n        this.render();\r\n      });\r\n\r\n      svg.addEventListener('mousedown', e => {\r\n        const polygon = this._polys.find(p => p.id === svg.dataset.id);\r\n        const appRoot = this.getRootNode().host;\r\n        const workZone = appRoot.shadowRoot.querySelector('work-zone'); \r\n\r\n        if(!workZone) return;\r\n\r\n        const startX = e.clientX;\r\n        const startY = e.clientY;\r\n        let dragging = false;\r\n\r\n        const onMouseMove = ev => {\r\n          const dx = Math.abs(ev.clientX - startX);\r\n          const dy = Math.abs(ev.clientY - startY);\r\n\r\n          if(!dragging && (dx > 3 || dy > 3)) {\r\n            dragging = true;\r\n            workZone.startDragFromBuffer(ev, polygon);\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n          }\r\n        };\r\n\r\n        const onMouseUp = ev => {\r\n          document.removeEventListener('mousemove', onMouseMove);\r\n          document.removeEventListener('mouseup', onMouseUp);\r\n        };\r\n\r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\ncustomElements.define('buffer-zone', BufferZone);","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","class ControlsBar extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({mode: 'open'});\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        :host, :host * {\r\n          -webkit-user-select: none;\r\n          -moz-user-select: none;\r\n          user-select: none;\r\n          -webkit-touch-callout: none;\r\n          -webkit-tap-highlight-color: transparent;\r\n        }\r\n\r\n        button { margin-right: 8px; }\r\n        select { margin-left: 12px; }\r\n      </style>\r\n\r\n      <button id=\"create\" type=\"button\">Создать</button>\r\n      <button id=\"save\"   type=\"button\">Сохранить</button>\r\n      <button id=\"reset\"  type=\"button\">Сбросить</button>\r\n    \r\n      <label>\r\n        Тип:\r\n        <select id=\"polyType\">\r\n          <option value=\"simple\" selected>Обычные</option>\r\n          <option value=\"convex\">Выпуклые</option>\r\n        </select>\r\n      </label>\r\n      `;\r\n\r\n    const send = (type, detail={}) =>\r\n      this.dispatchEvent( new CustomEvent(type,{detail,bubbles:true,composed:true}));\r\n\r\n    this.shadowRoot.getElementById('create').onclick = () => {\r\n      const type = this.shadowRoot.getElementById('polyType').value;\r\n      send ('polys:create', { type });\r\n    };\r\n\r\n    this.shadowRoot.getElementById('save').onclick = () => send('polys:save');\r\n    this.shadowRoot.getElementById('reset').onclick = () => send('polys:reset');\r\n  }\r\n}\r\ncustomElements.define('controls-bar', ControlsBar);","class WorkZone extends HTMLElement {\n  static LS_KEY = 'triumph.polys.v1'\n\n// ── Lifecycle ───────────────────────────────\n  connectedCallback() {\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.innerHTML = `\n      <style>\n        :host { \n          display: block; \n          border: none; \n          height: 100%; \n          min-height: 300px;\n          background: #f0f0f0; \n          position: relative;\n          --ruler: 26px;\n          --cell-px: 40;\n          --units-per-cell: 10;\n        }\n\n        canvas {\n          position: absolute;\n          display: block;\n          pointer-events: none;\n        }\n\n        #grid {\n          position: absolute;\n          left: var(--ruler);\n          top: 0;\n          width: calc(100% - var(--ruler));\n          height: calc(100% - var(--ruler));\n          z-index: 0;\n          background: #2b2f36;\n        }\n\n        .ruler-x {\n          position: absolute;\n          left: var(--ruler);\n          bottom: 0;\n          width: calc(100% - var(--ruler));\n          height: var(--ruler);\n          z-index: 5;\n          background: #4b4f56;\n        }\n\n        .ruler-y {\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: var(--ruler);\n          height: calc(100% - var(--ruler));\n          z-index: 5;\n          background: #4b4f56;\n        }\n\n        .corner {\n          position: absolute; \n          left: 0; \n          bottom: 0; \n          width: var(--ruler);\n          height: var(--ruler);\n          background: #4b4f56; \n          z-index: 5;\n          pointer-events: none;\n        }\n\n        #scene { \n          position: absolute; \n          left: 0;\n          top: 0;\n          width: 100%; \n          height: calc(100% - var(--ruler));\n          z-index: 2; \n          pointer-events: none;\n        }\n        \n        svg { \n          position: absolute; \n          top: 0; \n          left: 0; \n          cursor: grab; \n          z-index: 3; \n          transform: translateZ(0);\n          will-change: left, top;\n          pointer-events: none;\n          transform-origin: top left;\n        }\n\n        #interaction-layer {\n          position: absolute;\n          left: var(--ruler);\n          top: 0;\n          width: calc(100% - var(--ruler));\n          height: calc(100% - var(--ruler));\n          z-index: 4; \n          cursor: grab;\n        }\n      </style>\n\n      <canvas id=\"grid\"></canvas>\n      <div id=\"scene\"></div>\n      <div id=\"interaction-layer\"></div>\n      <canvas class=\"ruler-x\"></canvas>\n      <canvas class=\"ruler-y\"></canvas>\n      <canvas class=\"corner\" id=\"corner\"></canvas>\n    `;\n\n    this.$grid        = this.shadowRoot.getElementById('grid');\n    this.$scene       = this.shadowRoot.getElementById('scene');\n    this.$rx          = this.shadowRoot.querySelector('.ruler-x');\n    this.$ry          = this.shadowRoot.querySelector('.ruler-y');\n    this.$corner      = this.shadowRoot.getElementById('corner');\n    this.$interaction = this.shadowRoot.getElementById('interaction-layer');\n\n    const cs = getComputedStyle(this);\n    this._baseCell  = parseFloat(cs.getPropertyValue('--cell-px')) || 40;\n    this._baseUnits = parseFloat(cs.getPropertyValue('--units-per-cell')) || 10;\n    this._ppuBase   = this._baseCell / this._baseUnits;\n    \n    this._scale     = 1;\n    this._minScale  = 0.25;\n    this._maxScale  = 20;\n    this._panX      = 0;\n    this._panY      = 0;  \n    this._yMaxUnits = 550;\n    this._xMaxUnits = 1700;\n\n    this._niceStep = (ppu, targetPx = this._baseCell) => {\n      const raw = targetPx / ppu;\n      const pow = Math.pow(10, Math.floor(Math.log10(raw)));\n      const n = raw / pow;\n      let m;\n      if (n < 1.5) m = 1;\n      else if (n < 3.5) m = 2;\n      else if (n < 7.5) m = 5;\n      else m = 10;\n      return m * pow;\n    };\n\n    this._updateAllPolys = () => {\n      this.$scene.querySelectorAll('svg').forEach(svg => {\n        this._updateSvgAppearance(svg);\n      });\n    };\n\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this.$interaction.addEventListener('mousedown', this._onPointerDown);\n    this._onWheel = this._onWheel.bind(this);\n    this.addEventListener('wheel', this._onWheel, { passive: false });\n\n    const ro = new ResizeObserver(() => this.layoutAndDraw());\n    ro.observe(this);\n    this._ro = ro;\n\n    requestAnimationFrame(() => {\n      this.layoutAndDraw();\n      this._loadFromStorage();\n    });\n  }\n\n  disconnectedCallback() {\n    this._ro?.disconnect();\n    this.removeEventListener('wheel', this._onWheel);\n    this.$interaction?.removeEventListener('mousedown', this._onPointerDown);\n  }\n\n// ── Public API ─────────────────────────────\n  exportPolygons() {\n  const out = [];\n  this.$scene.querySelectorAll('svg').forEach(svg => {\n    const poly = svg.querySelector('polygon');\n    if (!poly) return;\n\n    const pointsString = poly.getAttribute('points') || '';\n    const numbers = pointsString.match(/-?[\\d.]+/g) || []; \n    \n    const points = [];\n\n    for (let i = 0; i < numbers.length; i += 2) {\n      if (numbers[i + 1] !== undefined) { \n        const x = parseFloat(numbers[i]);\n        const y = parseFloat(numbers[i + 1]);\n        if (Number.isFinite(x) && Number.isFinite(y)) {\n          points.push({ x, y });\n        }\n      }\n    }\n\n    out.push({\n      points: points, \n      fill: poly.getAttribute('fill') || '#ccc',\n      stroke: poly.getAttribute('stroke') || '#333',\n      xUnits: +svg.dataset.xUnits,\n      yUnits: +svg.dataset.yUnits,\n      baseWidth: +svg.dataset.baseWidth || 120,\n      baseHeight: +svg.dataset.baseHeight || 90,\n    });\n  });\n  return out;\n}\n\n  importPolygons(list = [], {clear=true} = {}) {\n    if (clear) this.clearPolygons();\n    for (const item of list) {\n      const svgNS = \"http://www.w3.org/2000/svg\";\n      const svg = document.createElementNS(svgNS, \"svg\");\n      const bw = item.baseWidth  ?? 120;\n      const bh = item.baseHeight ?? 90;\n      svg.setAttribute(\"width\", bw);\n      svg.setAttribute(\"height\", bh);\n      svg.setAttribute('viewBox', `0 0 ${bw} ${bh}`);\n      svg.dataset.baseWidth = bw;\n      svg.dataset.baseHeight = bh;\n\n      const polygon = document.createElementNS(svgNS, \"polygon\");\n      polygon.setAttribute(\"points\", item.points.map(pt => `${pt.x}, ${pt.y}`).join(\" \"));\n      polygon.setAttribute(\"fill\", item.fill);\n      polygon.setAttribute(\"stroke\", item.stroke);\n      polygon.setAttribute(\"stroke-width\", 1);\n      polygon.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n      polygon.style.pointerEvents = 'auto';\n\n      svg.appendChild(polygon);\n      this.$scene.appendChild(svg);\n\n      svg.dataset.xUnits = String(item.xUnits ?? 0);\n      svg.dataset.yUnits = String(item.yUnits ?? 0);\n      this._updateSvgAppearance(svg);\n    }\n    this._applyVisibilityByBounds();\n  }\n\n  clearPolygons() {\n    this.$scene.querySelectorAll('svg').forEach(svg => svg.remove());\n  }\n\n  save() {\n    try {\n      const data = this.exportPolygons();\n      localStorage.setItem(this.constructor.LS_KEY, JSON.stringify(data));\n      console.info('Polygons saved:', data.length);\n      return true;\n    } catch (e) {\n      console.error('Save failed', e);\n      return false;\n    }\n  }\n\n  reset() {\n    try {\n      localStorage.removeItem(this.constructor.LS_KEY);\n      this.clearPolygons();\n      console.info('Polygons reset');\n      return true;\n    } catch (e) {\n      console.error('Reset failed', e);\n      return false;\n    }\n  }\n\n  addPolygon(polygonData, x, y) {\n    const svgNS = \"http://www.w3.org/2000/svg\";\n    const svg = document.createElementNS(svgNS, \"svg\");\n\n    const baseWidth = 120;\n    const baseHeight = 90;\n    svg.setAttribute(\"width\", baseWidth);\n    svg.setAttribute(\"height\", baseHeight);\n    svg.setAttribute('viewBox', `0 0 ${baseWidth} ${baseHeight}`);\n    svg.dataset.baseWidth = baseWidth;\n    svg.dataset.baseHeight = baseHeight;\n\n    const polygon = document.createElementNS(svgNS, \"polygon\");\n    polygon.setAttribute(\n      \"points\",\n      polygonData.points.map(pt => `${pt.x}, ${pt.y}`).join(\" \")\n    );\n    polygon.setAttribute(\"fill\", polygonData.fill);\n    polygon.setAttribute(\"stroke\", polygonData.stroke);\n    polygon.setAttribute(\"stroke-width\", 1);\n    polygon.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n\n    polygon.style.pointerEvents = 'auto';\n\n    svg.appendChild(polygon);\n    this.$scene.appendChild(svg);\n\n    const logicalX = x / this._scale;\n    const logicalY = y / this._scale;\n\n    const logicalLeft = logicalX - baseWidth / 2;\n    const logicalTop  = logicalY - baseHeight / 2;\n\n    const { GL, GH } = this._gridLogical();\n    const xUnits = (logicalLeft - GL - this._panX) / this._ppuBase;\n    const yUnits = (GH - (logicalTop - this._panY)) / this._ppuBase;\n\n    svg.dataset.xUnits = String(xUnits);\n    svg.dataset.yUnits = String(yUnits);\n\n    this._updateSvgAppearance(svg);\n    return svg;\n  }\n\n  startDrag(e, svg) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.$interaction.style.cursor = 'grabbing';\n    const hostRect = this.getBoundingClientRect();\n    const svgRect = svg.getBoundingClientRect();\n    \n    const offsetX = (e.clientX - svgRect.left) / this._scale;\n    const offsetY = (e.clientY - svgRect.top) / this._scale;\n    \n    const onMouseMove = (ev) => {\n      const desiredLogicalLeft = (ev.clientX - hostRect.left) / this._scale - offsetX;\n      const desiredLogicalTop = (ev.clientY - hostRect.top) / this._scale - offsetY;\n\n      const { LEFT_MIN, LEFT_MAX, TOP_MIN, TOP_MAX } = this._gridBoundsLogicalFor(svg);\n\n      const finalLogicalLeft = this._clamp(desiredLogicalLeft, LEFT_MIN, LEFT_MAX);\n      const finalLogicalTop = this._clamp(desiredLogicalTop, TOP_MIN, TOP_MAX);\n      \n      const { GL, GH } = this._gridLogical();\n      svg.dataset.xUnits = String((finalLogicalLeft - GL - this._panX) / this._ppuBase);\n      svg.dataset.yUnits = String((GH - (finalLogicalTop - this._panY)) / this._ppuBase);\n      \n      this._updateSvgAppearance(svg);\n    };\n\n    const onMouseUp = () => {\n      this.$interaction.style.cursor = 'grab';\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  }\n\n  startDragFromBuffer(e, polygonData) {\n    e.preventDefault();\n    const hostRect = this.getBoundingClientRect();\n    const svg = this.addPolygon(\n      polygonData,\n      e.clientX - hostRect.left,\n      e.clientY - hostRect.top\n    );\n\n    const svgRect = svg.getBoundingClientRect();\n    const offsetX = (e.clientX - svgRect.left) / this._scale;\n    const offsetY = (e.clientY - svgRect.top) / this._scale;\n\n    const gridRect = this.$grid.getBoundingClientRect();\n    const gridLeft = (gridRect.left - hostRect.left) / this._scale;\n    const gridTop = (gridRect.top - hostRect.top) / this._scale;\n    const gridRight = gridLeft + (gridRect.width / this._scale);\n    const gridBottom = gridTop + (gridRect.height / this._scale);\n\n    const poly = svg.querySelector('polygon');\n    const bbox = poly.getBBox();\n\n    const bufferEl = this.getRootNode()?.querySelector('buffer-zone');\n    const bufferRect = bufferEl?.getBoundingClientRect();\n    const bufferTopLocal = bufferRect ? (bufferRect.top - hostRect.top) / this._scale : 0;\n    \n    const LEFT_MAX_GRID = gridRight - (bbox.x + bbox.width);\n    const TOP_MAX = gridBottom - (bbox.y + bbox.height);\n    const TOP_MIN_BUF = bufferTopLocal - bbox.y;\n    const LEFT_MIN =  gridLeft - bbox.x;\n\n    const onMouseMove = (ev) => {\n      let left = (ev.clientX - hostRect.left) / this._scale - offsetX;\n      let top = (ev.clientY - hostRect.top) / this._scale - offsetY;\n\n      if (left < LEFT_MIN) left = LEFT_MIN;\n      if (left > LEFT_MAX_GRID) left = LEFT_MAX_GRID;\n      if (top < TOP_MIN_BUF) top = TOP_MIN_BUF;\n      if (top > TOP_MAX) top = TOP_MAX;\n\n      svg.style.left = `${left * this._scale}px`;\n      svg.style.top = `${top * this._scale}px`;\n\n      const { GL, GH } = this._gridLogical();\n      svg.dataset.xUnits = String((left - GL - this._panX) / this._ppuBase);\n      svg.dataset.yUnits = String((GH - (top - this._panY)) / this._ppuBase);\n    };\n\n    const onMouseUp = () => {\n      const workRect = this.getBoundingClientRect();\n      const svgRect = svg.getBoundingClientRect();\n      const poly = svg.querySelector('polygon');\n      const polyRect = poly.getBoundingClientRect();\n\n      const dividerEl = this.getRootNode()?.querySelector('buffer-divider');\n      const dividerH = dividerEl ? dividerEl.getBoundingClientRect().height : 0;\n\n      const polyTopLocal = polyRect.top - workRect.top;\n\n      if (polyTopLocal < -dividerH) {\n        svg.remove();\n      } else if (polyTopLocal < 0) {\n        const offsetInSvg = polyRect.top - svgRect.top;\n        const targetTop = 0 - offsetInSvg;\n        const newTopPx = Math.round(targetTop);\n        svg.style.top = `${newTopPx}px`;\n\n        const logicalTop = newTopPx / this._scale;\n        const { GH } = this._gridLogical();\n        svg.dataset.yUnits = String((GH - (logicalTop - this._panY)) / this._ppuBase);\n      }\n\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  }\n\n// ── Event handlers ─────────────────────────\n    _onPointerDown(e) {\n    if (e.button !== 0) return;\n\n    this.$interaction.style.pointerEvents = 'none';\n    const elementUnder = this.shadowRoot.elementFromPoint(e.clientX, e.clientY);\n    this.$interaction.style.pointerEvents = 'auto';\n    \n    const svgTarget = elementUnder?.closest('svg');\n\n    if (svgTarget) {\n        this.startDrag(e, svgTarget);\n    } else {\n        this._onPanStart(e);\n    }\n  }\n\n  _onPanStart(e) {\n    this.$interaction.style.cursor = 'grabbing';\n    e.preventDefault();\n\n    const startX = e.clientX;\n    const startY = e.clientY;\n    const panX0 = this._panX;\n    const panY0 = this._panY;\n    \n    const { GW, GH } = this._gridLogical();\n\n    const onMouseMove = (ev) => {\n      const dx = (ev.clientX - startX) / this._scale;\n      const dy = (ev.clientY - startY) / this._scale;\n      \n      this._panX = this._clamp(panX0 + dx, -Math.max(0, this._xMaxPx() - GW), 0);\n      this._panY = this._clamp(panY0 + dy, 0, Math.max(0, this._yMaxPx() - GH));\n\n      this.drawGrid();\n      this.drawRulerX();\n      this.drawRulerY();\n      this._updateAllPolys();\n      this._applyVisibilityByBounds();\n    };\n\n    const onMouseUp = () => {\n      this.$interaction.style.cursor = 'grab';\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n  }\n\n  _onWheel(e) {\n    e.preventDefault();\n\n    const dir = e.deltaY < 0 ? 1 : -1;\n    const step = 0.1;\n    const prevScale = this._scale;\n    const nextScale = this._clamp(prevScale * (1 + dir * step), this._minScale, this._maxScale);\n\n    if (Math.abs(nextScale - prevScale) < 1e-5) return;\n\n    const hostRect = this.getBoundingClientRect();\n    const cursorX_host = e.clientX - hostRect.left;\n    const cursorY_host = e.clientY - hostRect.top;\n\n    const { GL: GL0, GH: GH0 } = this._gridLogical();\n    const xLogical = cursorX_host / prevScale - GL0 - this._panX;\n\n    const yLogical = GH0 - (cursorY_host / prevScale - this._panY);\n\n    this._scale = nextScale;\n\n    const { GL: GL1, GH: GH1, GW: GW1 } = this._gridLogical();\n\n    const newPanX = cursorX_host / nextScale - GL1 - xLogical;\n    const newPanY = cursorY_host / nextScale - GH1 + yLogical;\n    const minPanX = -Math.max(0, this._xMaxPx() - GW1);\n    const maxPanY = Math.max(0, this._yMaxPx() - GH1);\n    \n    this._panX = this._clamp(newPanX, minPanX, 0);\n    this._panY = this._clamp(newPanY, 0, maxPanY);\n\n    const ppu = this._ppuBase * this._scale;\n    const unitsPerCell = this._niceStep(ppu, this._baseCell);\n    const cellPx = unitsPerCell * ppu;\n\n    this.style.setProperty('--units-per-cell', String(unitsPerCell));\n    this.style.setProperty('--cell-px', String(+cellPx.toFixed(4)));\n\n    this.layoutAndDraw();\n    this._updateAllPolys();\n    this._applyVisibilityByBounds();\n  }\n\n// ── Persistence ────────────────────────────\n  _loadFromStorage() {\n    try {\n      const raw = localStorage.getItem(this.constructor.LS_KEY);\n      if (!raw) return;\n      const data = JSON.parse(raw);\n      if (Array.isArray(data)) this.importPolygons(data, {clear:true});\n    } catch (e) {\n      console.warn('Failed to load saved polygons:', e);\n    }\n  }\n\n// ── Rendering ──────────────────────────────  \n  layoutAndDraw() {\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\n\n    this.$grid.style.top = '0px';\n    this.$grid.style.height = 'calc(100% - var(--ruler))';\n\n    this.$ry.style.top = '0px';\n    this.$ry.style.height = 'calc(100% - var(--ruler))';\n\n    const fit = (el) => {\n      const r = el.getBoundingClientRect();\n      const ctx = el.getContext('2d');\n      el.width = Math.max(1, Math.floor(r.width * dpr));\n      el.height = Math.max(1, Math.floor(r.height * dpr));\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n      return ctx;\n    };\n\n    this._ctxGrid = fit(this.$grid);\n    this._ctxX = fit(this.$rx);\n    this._ctxY = fit(this.$ry);\n    this._ctxCorner = fit(this.$corner);\n\n    this.drawGrid();\n    this.drawRulerX();\n    this.drawRulerY();\n    this.drawCorner();\n    this._updateAllPolys();\n    this._applyVisibilityByBounds();\n  }\n\n  drawCorner() {\n    const ctx = this._ctxCorner;\n    const r = this.$corner.getBoundingClientRect();\n    const w = r.width, h = r.height;\n\n    ctx.fillStyle = '#e1e3e6';\n    ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    ctx.fillText('0', w / 2, h / 2);\n  }\n\n  drawGrid() {\n    const ctx = this._ctxGrid;\n    const r = this.$grid.getBoundingClientRect();\n    const w = r.width, h = r.height;\n    const cell = parseFloat(getComputedStyle(this).getPropertyValue('--cell-px')) || 40;\n    const units = parseFloat(getComputedStyle(this).getPropertyValue('--units-per-cell')) || this._baseUnits;\n\n    ctx.fillStyle = '#2b2f36';\n    ctx.fillRect(0, 0, w, h);\n\n    const majorEach = 5;\n\n    const cssPanX = this._panX * this._scale;\n    const offX = ((cssPanX % cell) + cell) % cell;\n    const baseIdxX = Math.floor(-cssPanX / cell);\n    const maxIdxX = Math.floor(this._xMaxUnits / units);\n\n    for (let k = 0; ; k++) {\n      const xPix = Math.floor(k * cell + offX) + 0.5;\n      if (xPix < -0.5) continue;\n      if (xPix > w + 0.5) break;\n      const i = baseIdxX + k;\n      if (i < 0) continue;\n      if (i > maxIdxX) break;\n      ctx.beginPath();\n      ctx.lineWidth = (i % majorEach === 0) ? 1.2 : 1;\n      ctx.strokeStyle = (i % majorEach === 0) ? 'rgba(255,255,255,.18)' : 'rgba(255,255,255,.10)';\n      ctx.moveTo(xPix, 0);\n      ctx.lineTo(xPix, h);\n      ctx.stroke();\n    }\n\n    const cssPanY = this._panY * this._scale;\n    const offY = ((cssPanY % cell) + cell) % cell;\n    const baseIdxY = Math.floor(cssPanY / cell);\n    const maxIdxY = Math.floor(this._yMaxUnits / units);\n\n    for (let k = 0; ; k++) {\n      const yPix = Math.floor(h - (k * cell - offY)) + 0.5;\n      if (yPix < -0.5) break;\n      if (yPix > h + 0.5) continue;\n      const i = baseIdxY + k;\n      if (i < 0) continue;\n      if (i > maxIdxY) break; \n      ctx.beginPath();\n      ctx.lineWidth = (i % majorEach === 0) ? 1.2 : 1;\n      ctx.strokeStyle = (i % majorEach === 0) ? 'rgba(255,255,255,.18)' : 'rgba(255,255,255,.10)';\n      ctx.moveTo(0, yPix);\n      ctx.lineTo(w, yPix);\n      ctx.stroke();\n    }\n  }\n\n  drawRulerX() {\n    const ctx = this._ctxX;\n    const r = this.$rx.getBoundingClientRect();\n    const w = r.width, h = r.height;\n\n    const units = parseFloat(getComputedStyle(this).getPropertyValue('--units-per-cell')) || this._baseUnits;\n    const ppu   = this._ppuBase * this._scale;                 \n    const cssPanX = this._panX * this._scale;\n\n    const worldLeftU  = -cssPanX / ppu;\n    const worldRightU = worldLeftU + w / ppu;\n\n    ctx.clearRect(0, 0, w, h);\n    ctx.fillStyle = '#4b4f56';\n    ctx.fillRect(0, 0, w, h);\n\n    ctx.fillStyle = '#e1e3e6';\n    ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    let u = Math.ceil(worldLeftU / units) * units;\n\n    const cornerW = parseFloat(getComputedStyle(this).getPropertyValue('--ruler')) || 26;\n    while (u <= worldRightU + 1e-9) {\n      const xPix = Math.round((u - worldLeftU) * ppu) + 0.5;\n\n      if (Math.abs(u) < 1e-9 && xPix < cornerW + 8) { u += units; continue; }\n\n      const label = String(u);\n      const { w: tw, h: th } = this._metrics(ctx, label);\n      if (this._fitsHorizCenter(xPix, tw, w, 1) && this._fitsVertMiddle(h / 2, th, h, 1, 1)) {\n        ctx.fillText(label, xPix, h / 2);\n      }\n      u += units;\n    }\n  }\n\n  drawRulerY() {\n    const ctx = this._ctxY;\n    const w = this.$ry.getBoundingClientRect().width;\n    const h = this.$ry.getBoundingClientRect().height;\n    const cell = parseFloat(getComputedStyle(this).getPropertyValue('--cell-px')) || 40;\n    const units = parseFloat(getComputedStyle(this).getPropertyValue('--units-per-cell')) || 10;\n\n    ctx.clearRect(0, 0, w, h);\n    ctx.fillStyle = '#4b4f56';\n    ctx.fillRect(0, 0, w, h);\n\n    ctx.fillStyle = '#e1e3e6';\n    ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial';\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n\n    const xLeft = 4;\n    const cssPanY = this._panY * this._scale;\n    const off = ((cssPanY % cell) + cell) % cell;\n    const baseIdx = Math.floor(cssPanY / cell);\n\n    const maxIdx = Math.floor(this._yMaxUnits / units);\n    for (let k = 0; ; k++) {\n      const yPix = Math.floor(h - (k * cell - off)) + 0.5;\n      if (yPix < -0.5) break;\n      const i = baseIdx + k;\n      if (i < 0) continue;\n      if (i > maxIdx) break; \n      const labelUnits = i * units;\n      const text = String(labelUnits);\n\n      const { w: tw, h: th } = this._metrics(ctx, text);\n      if (!this._fitsHorizLeft(xLeft, tw, w, 4, 2)) continue;\n      if (!this._fitsVertMiddle(yPix, th, h, 1, 1)) continue;\n\n      ctx.fillText(text, xLeft, yPix);\n    }\n  }\n\n  _updateSvgAppearance(svg) {\n    const xu = parseFloat(svg.dataset.xUnits ?? 'NaN');\n    const yu = parseFloat(svg.dataset.yUnits ?? 'NaN');\n    if (!Number.isFinite(xu) || !Number.isFinite(yu)) return;\n    \n    const baseWidth = parseFloat(svg.dataset.baseWidth);\n    const baseHeight = parseFloat(svg.dataset.baseHeight);\n    const scaledWidth = baseWidth * this._scale;\n    const scaledHeight = baseHeight * this._scale;\n\n    svg.setAttribute('width', scaledWidth);\n    svg.setAttribute('height', scaledHeight);\n    \n    const { GL, GH } = this._gridLogical();\n    const logicalLeft = GL + xu * this._ppuBase + this._panX;\n    const logicalTop = GH - (yu * this._ppuBase) + this._panY;\n    \n    svg.style.left = `${Math.round(logicalLeft * this._scale)}px`;\n    svg.style.top = `${Math.round(logicalTop * this._scale)}px`;\n  }\n\n  _applyVisibilityByBounds() {\n    const hostRect = this.getBoundingClientRect();\n    const gridRect = this.$grid.getBoundingClientRect();\n    const viewLeft   = gridRect.left   - hostRect.left;\n    const viewTop    = gridRect.top    - hostRect.top;\n    const viewRight  = viewLeft  + gridRect.width;\n    const viewBottom = viewTop   + gridRect.height;\n\n    this.$scene.querySelectorAll('svg').forEach(svg => {\n      const r = svg.getBoundingClientRect();\n      const left   = r.left - hostRect.left;\n      const top    = r.top  - hostRect.top;\n      const right  = left + r.width;\n      const bottom = top  + r.height;\n\n      const overlaps = (left < viewRight && right > viewLeft && top < viewBottom && bottom > viewTop);\n\n      if (!overlaps) {\n        svg.style.visibility = 'hidden';\n        svg.style.clipPath = '';\n        return;\n      }\n\n      svg.style.visibility = 'visible';\n\n      const topClip    = Math.max(0, viewTop    - top);\n      const bottomClip = Math.max(0, bottom     - viewBottom);\n      const leftClip   = Math.max(0, viewLeft   - left);\n      const rightClip  = Math.max(0, right      - viewRight);\n\n      if (topClip > 0.5 || bottomClip > 0.5 || leftClip > 0.5 || rightClip > 0.5) {\n        svg.style.clipPath = `inset(${topClip}px ${rightClip}px ${bottomClip}px ${leftClip}px)`;\n      } else {\n        svg.style.clipPath = '';\n      }\n    });\n  }\n\n// ── Geometry / Utils ───────────────────────  \n  _gridLogical() {\n    const host = this.getBoundingClientRect();\n    const g = this.$grid.getBoundingClientRect();\n    const GL = (g.left - host.left) / this._scale ;\n    const GT = (g.top - host.top) / this._scale ;\n    const GW = g.width / this._scale;\n    const GH = g.height / this._scale;\n    const GR = GL + GW;\n    const GB = GT + GH;\n    return { GL, GT, GR, GB, GW, GH };\n  }\n\n  _yMaxPx() { return this._yMaxUnits * this._ppuBase; }\n  _xMaxPx() { return this._xMaxUnits * this._ppuBase; }\n\n\n  _clamp(v, min, max) { return v < min ? min : v > max ? max : v; }\n\n  _metrics(ctx, label) {\n    const m = ctx.measureText(label);\n    const asc = m.actualBoundingBoxAscent ?? 8;\n    const dsc = m.actualBoundingBoxDescent ?? 3;\n    return { w: m.width ?? 0, h: asc + dsc };\n  }\n\n  _fitsVertMiddle(y, hText, hCanvas, padTop = 1, padBottom = 1) {\n    return y - hText / 2 >= padTop && y + hText / 2 <= hCanvas - padBottom;\n  }\n\n  _fitsHorizCenter(x, wText, wCanvas, pad = 1) {\n    return x - wText / 2 >= pad && x + wText / 2 <= wCanvas - pad;\n  }\n\n  _fitsHorizLeft(xLeft, wText, wCanvas, padLeft = 4, padRight = 2) {\n    return xLeft >= padLeft && xLeft + wText <= wCanvas - padRight;\n  }\n\n  _gridBoundsLogicalFor(svg) {\n    const { GL, GR, GH } = this._gridLogical();\n    const viewTopWorld = 0;\n    const viewBottomWorld = GH;\n    const viewRightWorld = Math.min(GR, this._xMaxPx() + GL);\n\n    const bbox = svg.querySelector('polygon').getBBox();\n\n    return {\n      LEFT_MIN: GL - bbox.x,\n      LEFT_MAX: viewRightWorld - (bbox.x + bbox.width),\n      TOP_MIN: viewTopWorld - bbox.y,\n      TOP_MAX: viewBottomWorld - (bbox.y + bbox.height),\n    };\n  }  \n}\n\ncustomElements.define('work-zone', WorkZone);","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./main.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./main.css\";\n       export default content && content.locals ? content.locals : undefined;\n","export const store = {\r\n  buffer: [],\r\n  work: [],\r\n};\r\n\r\nexport const setBuffer = (list) => {\r\n  store.buffer = list;\r\n};","export const randInt = (a, b) => a + Math.floor(Math.random() * (b - a +1));\r\n\r\nfunction normalizePolygon(pts, svgWidth = 120, svgHeight = 90, padding = 4) {\r\n  const xs = pts.map(p => p.x);\r\n  const ys = pts.map(p => p.y);\r\n\r\n  const minX = Math.min(...xs);\r\n  const maxX = Math.max(...xs);\r\n  const minY = Math.min(...ys);\r\n  const maxY = Math.max(...ys);\r\n\r\n  const polyWidth = maxX - minX;\r\n  const polyHeight = maxY - minY;\r\n\r\n  const scaleX = (svgWidth - 2*padding) / (polyWidth || 1);\r\n  const scaleY = (svgHeight - 2*padding) / (polyHeight || 1);\r\n  const scale = Math.min(scaleX, scaleY);\r\n\r\n  const offsetX = padding - minX*scale;\r\n  const offsetY = padding - minY*scale;\r\n\r\n  return pts.map(p => ({\r\n    x: p.x*scale + offsetX,\r\n    y: p.y*scale + offsetY\r\n  }));\r\n}\r\n\r\nfunction segmentsIntersect(a, b, c, d) {\r\n  const cross = (p1, p2, p3) =>\r\n    (p2.x - p1.x) * (p3.y - p1.y) - (p2.y - p1.y) * (p3.x - p1.x);\r\n\r\n  const d1 = cross(a, b, c);\r\n  const d2 = cross(a, b, d);\r\n  const d3 = cross(c, d, a);\r\n  const d4 = cross(c ,d, b);\r\n\r\n  return (d1 * d2 < 0) && (d3 * d4 < 0);\r\n}\r\n\r\nfunction isSimplePolygon(pts) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a1 = pts[i];\r\n    const b1 = pts[(i+1)%n];\r\n    for (let j = i+1; j < n; j++) {\r\n      if (Math.abs(i-j) <= 1 || (i===0 && j===n-1) || (i===n-1 && j===0)) continue;\r\n      const a2 = pts[j];\r\n      const b2 = pts[(j+1)%n];\r\n      if (segmentsIntersect(a1, b1, a2, b2)) return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isConvexPolygon(pts) {\r\n  const n = pts.length;\r\n  if (n < 3) return false;\r\n  let sign = 0;\r\n\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const c = pts[(i + 2) % n];\r\n\r\n    const cross = (b.x - a.x)*(c.y - b.y) - (b.y - a.y)*(c.x - b.x);\r\n\r\n    if (Math.abs(cross) > 1e-8) {\r\n      const s = Math.sign(cross);\r\n      if (sign === 0) sign = s;\r\n      else if (s !== sign) return false;\r\n    }\r\n  }\r\n\r\n  console.log('gh');\r\n  return true;\r\n}\r\n\r\nfunction isAngleEnough(pts, minAngleDeg = 15) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const c = pts[(i + 2) % n];\r\n\r\n    const v1 = { x: b.x - a.x, y: b.y - a.y };\r\n    const v2 = { x: c.x - b.x, y: c.y - b.y };\r\n\r\n    const cosAngle = (v1.x * v2.x + v1.y * v2.y) / (Math.hypot(v1.x, v1.y) * Math.hypot(v2.x, v2.y));\r\n    const angleDeg = Math.acos(Math.min(Math.max(cosAngle, -1), 1)) * 180 / Math.PI;\r\n\r\n    if (angleDeg < minAngleDeg) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isDistanceEnough(pts, dMin = 25) {\r\n  const n = pts.length;\r\n  for (let i = 0; i < n; i++) {\r\n    const a = pts[i];\r\n    const b = pts[(i + 1) % n];\r\n    const dist = Math.hypot(b.x - a.x, b.y - a.y);\r\n    if (dist < dMin) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function makePolySimple() {\r\n  const n = randInt(3, 8);\r\n  const rMin = 25, rMax = 50;\r\n  let pts;\r\n\r\n  do {\r\n    const angles = Array.from({length:n}, () => Math.random() * 2*Math.PI).sort((a,b)=>a-b);\r\n    pts = angles.map(t => {\r\n      const r = rMin + Math.random()*(rMax - rMin);\r\n      return {\r\n        x: r * Math.cos(t),\r\n        y: r * Math.sin(t)\r\n      };\r\n    });\r\n  } while (\r\n    !isSimplePolygon(pts) ||\r\n    !isAngleEnough(pts) ||\r\n    !isDistanceEnough(pts)\r\n  );\r\n\r\n  pts = normalizePolygon(pts, 120, 90, 8);\r\n\r\n  const h = randInt(0,360);\r\n  return {\r\n    id: `p_${crypto.randomUUID ?.() || Date.now() + ' ' + Math.random()}`,\r\n    points: pts,\r\n    fill: `hsl(${h} 70% 55%)`,\r\n    stroke: 'rgba(0,0,0.25)'\r\n  };\r\n} \r\n\r\nexport function makePolyConvex() {\r\n  let pts;\r\n  const n = randInt(3, 8);\r\n  const rMin = 25, rMax = 45;\r\n  const r = (rMin + rMax)/2;\r\n\r\n  do {\r\n    pts = [];\r\n    let angleStep = (2 * Math.PI) / n;\r\n    for (let i = 0; i < n; i++) {\r\n      const angle = i * angleStep + (Math.random() - 0.5) * angleStep * 0.5;\r\n      const r = rMin + Math.random() * (rMax - rMin) * 0.25;\r\n      pts.push({ x: r * Math.cos(angle), y: r * Math.sin(angle) });\r\n    }\r\n  } while (!isConvexPolygon(pts) || !isSimplePolygon(pts));\r\n\r\n  pts = normalizePolygon(pts, 120, 90, 8);\r\n\r\n  const h = randInt(0, 360);\r\n\r\n  return {\r\n    id: `p_${crypto.randomUUID ?.() || Date.now() + ' ' + Math.random()}`,\r\n    points: pts,\r\n    fill: `hsl(${h} 70% 55%)`,\r\n    stroke: 'rgba(0,0,0.25)'\r\n  };\r\n} \r\n\r\nexport function makeManySimple() {\r\n  return Array.from({ length: randInt(5, 20) }, makePolySimple);\r\n}\r\n\r\nexport function makeManyConvex() {\r\n  return Array.from({ length: randInt(5, 20) }, makePolyConvex);\r\n}","import './controls-bar.js';\r\nimport './buffer-zone.js';\r\nimport './work-zone.js';\r\nimport './buffer-divider.js';\r\n\r\nimport { store, setBuffer } from '../store.js';\r\nimport { makeManySimple, makeManyConvex } from '../utils/polygen.js';\r\n\r\nclass AppRoot extends HTMLElement {\r\n  connectedCallback() {\r\n    this.attachShadow({ mode: 'open' });\r\n    this.shadowRoot.innerHTML = `\r\n      <style>\r\n        :host { \r\n          display: grid;\r\n          grid-template-rows: auto 1fr;\r\n          height: 100vh;\r\n          min-height: 0;\r\n          --header-h: 0px;\r\n          --divider-h: 12px;\r\n        }\r\n\r\n        header { \r\n          padding: 12px 16px;\r\n          border-bottom: 1px solid var(--border, #2b3342);\r\n          background: linear-gradient(0deg, var(--panel, #151a21), #11161f);\r\n          color: var(--text, #e9eef5);\r\n          user-select: none;\r\n        }\r\n       \r\n        main { \r\n          display: grid;\r\n          grid-template-rows: 220px var(--divider-h) 1fr; \r\n          height: calc(100% - var(--header-h));\r\n          border: none;\r\n          background: var(--bg, #0f1216);\r\n          position: relative;\r\n          min-height: 0;\r\n          overflow: hidden;\r\n        }\r\n       \r\n        .buffer{\r\n          position: relative;\r\n          background: var(--panel, #151a21);\r\n        }\r\n\r\n        .work{\r\n          position: relative;\r\n          background: var(--panel, #151a21);\r\n          min-height: 0;\r\n        }\r\n          \r\n      </style>\r\n      <header><strong>Triumph</strong> · <controls-bar></controls-bar></header>\r\n      <main>\r\n        <buffer-zone class=\"buffer\"></buffer-zone>\r\n        <buffer-divider></buffer-divider>\r\n        <work-zone class=\"work\"></work-zone>\r\n      </main>\r\n    `;\r\n\r\n    const header = this.shadowRoot.querySelector('header');\r\n    this._setHeaderHeight = () => {\r\n      const hh = Math.ceil(header.getBoundingClientRect().height);\r\n      this.style.setProperty('--header-h', `${hh}px`);\r\n    };\r\n    this._setHeaderHeight();\r\n\r\n    this._headerRO = new ResizeObserver(this._setHeaderHeight);\r\n    this._headerRO.observe(header);\r\n    window.addEventListener('resize', this._setHeaderHeight);\r\n\r\n    this.addEventListener('polys:create', (e)=> {\r\n      let polys;\r\n      if (e.detail.type === 'convex') {\r\n        polys = makeManyConvex();\r\n      } else {\r\n        polys = makeManySimple();\r\n      }\r\n\r\n      setBuffer(polys);\r\n\r\n      const bufferZone = this.shadowRoot.querySelector('buffer-zone');\r\n      bufferZone.polygons = store.buffer;\r\n    });\r\n\r\n\r\n    this.addEventListener('polys:save', () => {\r\n      console.log('polys:save event received');\r\n      const workZone = this.shadowRoot.querySelector('work-zone');\r\n      if (!workZone) {\r\n        console.error('work-zone element not found');\r\n        return;\r\n      }\r\n      workZone.save();\r\n    });\r\n\r\n    this.addEventListener('polys:reset', () => {\r\n      const workZone = this.shadowRoot.querySelector('work-zone');\r\n      workZone?.reset();\r\n    });\r\n\r\n  }\r\n}\r\ncustomElements.define('app-root', AppRoot);"],"names":["module","exports","styleElement","nonce","setAttribute","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","styleSheet","cssText","firstChild","removeChild","appendChild","document","createTextNode","BufferDivider","HTMLElement","connectedCallback","this","attachShadow","mode","shadowRoot","innerHTML","customElements","define","___CSS_LOADER_EXPORT___","cssWithMappingToString","toString","map","content","needLayer","join","modules","dedupe","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","BufferZone","_polys","_selectedId","render","polygons","v","svgItems","p","pointsStr","points","pt","x","y","isSelected","String","fill","stroke","querySelectorAll","forEach","svg","addEventListener","dataset","e","polygon","find","workZone","getRootNode","host","querySelector","startX","clientX","startY","clientY","dragging","onMouseMove","ev","dx","Math","abs","dy","startDragFromBuffer","removeEventListener","onMouseUp","element","createElement","setAttributes","attributes","insert","memo","style","target","styleTarget","window","HTMLIFrameElement","contentDocument","head","getTarget","Error","ControlsBar","send","type","detail","dispatchEvent","CustomEvent","bubbles","composed","getElementById","onclick","value","WorkZone","static","$grid","$scene","$rx","$ry","$corner","$interaction","cs","getComputedStyle","_baseCell","parseFloat","getPropertyValue","_baseUnits","_ppuBase","_scale","_minScale","_maxScale","_panX","_panY","_yMaxUnits","_xMaxUnits","_niceStep","ppu","targetPx","raw","pow","floor","log10","n","m","_updateAllPolys","_updateSvgAppearance","_onPointerDown","bind","_onWheel","passive","ro","ResizeObserver","layoutAndDraw","observe","_ro","requestAnimationFrame","_loadFromStorage","disconnectedCallback","disconnect","exportPolygons","out","poly","numbers","getAttribute","match","Number","isFinite","xUnits","yUnits","baseWidth","baseHeight","importPolygons","clear","clearPolygons","svgNS","createElementNS","bw","bh","pointerEvents","_applyVisibilityByBounds","save","localStorage","setItem","constructor","LS_KEY","console","info","error","reset","removeItem","addPolygon","polygonData","logicalLeft","logicalTop","GL","GH","_gridLogical","startDrag","preventDefault","stopPropagation","cursor","hostRect","getBoundingClientRect","svgRect","offsetX","left","offsetY","top","desiredLogicalLeft","desiredLogicalTop","LEFT_MIN","LEFT_MAX","TOP_MIN","TOP_MAX","_gridBoundsLogicalFor","finalLogicalLeft","_clamp","finalLogicalTop","gridRect","gridLeft","gridTop","gridRight","width","gridBottom","height","bbox","getBBox","bufferEl","bufferRect","bufferTopLocal","LEFT_MAX_GRID","TOP_MIN_BUF","workRect","polyRect","dividerEl","dividerH","polyTopLocal","targetTop","newTopPx","round","button","elementUnder","elementFromPoint","svgTarget","closest","_onPanStart","panX0","panY0","GW","max","_xMaxPx","_yMaxPx","drawGrid","drawRulerX","drawRulerY","dir","deltaY","prevScale","nextScale","cursorX_host","cursorY_host","GL0","GH0","xLogical","yLogical","GL1","GH1","GW1","newPanX","newPanY","minPanX","maxPanY","unitsPerCell","cellPx","setProperty","toFixed","getItem","parse","Array","isArray","warn","dpr","devicePixelRatio","fit","el","r","ctx","getContext","setTransform","_ctxGrid","_ctxX","_ctxY","_ctxCorner","drawCorner","w","h","fillStyle","font","textAlign","textBaseline","fillText","cell","units","fillRect","cssPanX","offX","baseIdxX","maxIdxX","xPix","beginPath","lineWidth","strokeStyle","moveTo","lineTo","cssPanY","offY","baseIdxY","maxIdxY","yPix","worldLeftU","worldRightU","clearRect","u","ceil","cornerW","label","tw","th","_metrics","_fitsHorizCenter","_fitsVertMiddle","off","baseIdx","maxIdx","text","_fitsHorizLeft","xu","yu","scaledWidth","scaledHeight","viewLeft","viewTop","viewRight","viewBottom","right","bottom","visibility","clipPath","topClip","bottomClip","leftClip","rightClip","g","GT","GR","GB","min","measureText","asc","actualBoundingBoxAscent","dsc","actualBoundingBoxDescent","hText","hCanvas","padTop","padBottom","wText","wCanvas","pad","xLeft","padLeft","padRight","viewBottomWorld","viewRightWorld","insertStyleElement","styleTagTransform","apply","parentNode","removeStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","locals","store","buffer","work","randInt","b","random","normalizePolygon","pts","svgWidth","svgHeight","padding","xs","ys","minX","maxX","minY","scaleX","scaleY","scale","segmentsIntersect","c","cross","p1","p2","p3","d1","d2","d3","d4","isSimplePolygon","a1","b1","j","isConvexPolygon","sign","s","log","isAngleEnough","minAngleDeg","v1","v2","cosAngle","hypot","acos","PI","isDistanceEnough","dMin","makePolySimple","from","sort","t","cos","sin","crypto","randomUUID","Date","now","makePolyConvex","angleStep","angle","AppRoot","header","_setHeaderHeight","hh","_headerRO","polys"],"sourceRoot":""}